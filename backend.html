<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cajero Bancario Inteligente</title>
  <link rel="stylesheet" href="frontend.css">
</head>
<body>

  <div class="cajero">
    <h2>🏦 Cajero Bancario</h2>

    <label for="operacion">Seleccione operación:</label>
    <select id="operacion">
      <option value="Deposito">Depósito</option>
      <option value="Retiro">Retiro</option>
    </select>

    <label for="monto">Ingrese el monto ($):</label>
    <input type="number" id="monto" min="1" placeholder="Ej: 100">
    <button onclick="realizarOperacion()">Registrar operación</button>

    <div class="resultados">
      <p><strong>Total depositado:</strong> $<span id="totalDepositos">0</span></p>
      <p><strong>Total retirado:</strong> $<span id="totalRetiros">0</span></p>
      <p><strong>Saldo final:</strong> $<span id="saldo">0</span></p>
    </div>

    <div class="movimientos" id="movimientos"></div>
  </div>

  <script>
    //// Arreglo para guardar todas las transacciones
    let movimientos = [];
    //Variables para los totales
    let totalDepositos = 0;
    let totalRetiros = 0;
    let saldo = 0;

    function realizarOperacion() {
      // Tomo la operación que eligió el usuario y el monto que escribió
      const operacion = document.getElementById("operacion").value;
      const montoInput = document.getElementById("monto");
      const monto = parseFloat(montoInput.value);
// Valido que el monto sea un número válido y mayor a 0
      if (isNaN(monto) || monto <= 0) {
          alert("Por favor, ingresa un monto válido.");
          return;
        }
    
// Si es retiro, verifico que haya saldo suficiente
      if (operacion === "Retiro" && monto > saldo ) {
        alert(" Saldo insuficiente. Operación no realizada.");
        return;
      }
//Guardo el movimiento
      movimientos.push({ tipo: operacion, monto });
//Actualizo los totales según la operación
      if (operacion === "Deposito") {
        totalDepositos += monto;
        saldo += monto;
      } else {
        totalRetiros += monto;
        saldo -= monto;
      }

      actualizarPantalla();
      montoInput.value = "";
    }

    function actualizarPantalla() {
      //Muestro los totales con 2 decimales
      document.getElementById("totalDepositos").textContent = totalDepositos.toFixed(2);
      document.getElementById("totalRetiros").textContent = totalRetiros.toFixed(2);
      document.getElementById("saldo").textContent = saldo.toFixed(2);

      const lista = document.getElementById("movimientos");
      lista.innerHTML = "";
      // Recorro cada movimiento y lo muestro
      for (let i = 0; i < movimientos.length; i++) {
        const mov = movimientos[i];
        const div = document.createElement("div");
        div.classList.add(mov.tipo.toLowerCase());
        div.textContent = `${mov.tipo}: ${mov.monto.toFixed(2)}`;
        lista.appendChild(div);
      }
    }
  </script>

</body>
</html>